<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>ReviewCash Ultimate Pro</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://miniapps.ai/sdk/miniapps-ai-v1.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- PRELOADER -->
  <div id="loader" class="loader-overlay">
    <div class="spinner"></div>
    <div style="margin-top: 20px; font-weight: 700; color: var(--accent-cyan);">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...</div>
  </div>

  <div class="app-container">
    
    <!-- TASKS VIEW -->
    <section id="view-tasks" class="anim-entry">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
        <h2 style="font-size: 34px; font-weight: 800; margin: 0;">–ó–∞–¥–∞–Ω–∏—è</h2>
        <div style="display: flex; background: var(--glass); padding: 4px; border-radius: 16px; border: 1px solid var(--glass-border);">
            <div class="nav-item active" style="padding: 8px 18px; font-size: 12px;" onclick="setFilter('all')" id="f-all">–í—Å–µ</div>
            <div class="nav-item" style="padding: 8px 18px; font-size: 12px;" onclick="setFilter('my')" id="f-my">–ú–æ–∏</div>
        </div>
      </div>
      <div id="tasks-list"></div>
    </section>

    <!-- PROFILE VIEW -->
    <section id="view-profile" class="hidden anim-entry">
      <div class="card">
        <div class="profile-header">
          <div class="avatar-ring"><img class="avatar-img" id="u-pic" src="" alt="Avatar"></div>
          <div class="balance-stack">
            <div id="u-name" style="color:var(--text-dim); font-size: 14px; font-weight: 700;">Loading...</div>
            <div id="u-bal-rub" class="bal-rub">0 ‚ÇΩ</div>
            <div id="u-bal-star" class="bal-star">0 ‚≠ê</div>
          </div>
        </div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:28px;">
            <button class="btn btn-main" onclick="openModal('m-topup')">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
            <button class="btn btn-secondary" onclick="openModal('m-withdraw')">–í—ã–≤–µ—Å—Ç–∏</button>
        </div>
      </div>

      <!-- ADMIN BUTTON (HIDDEN BY DEFAULT) -->
      <div id="admin-panel-card" class="card" style="display: none; padding: 15px; border: 1px dashed var(--accent-gold); background: rgba(255, 204, 0, 0.05);">
        <div class="menu-item" onclick="openAdminPanel()" style="margin:0; background:transparent; border:none; padding:5px;">
            <span style="color: var(--accent-gold);">üõ°Ô∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</span>
            <span id="admin-badge" style="background:var(--accent-gold); color:#000; padding:2px 8px; border-radius:10px; font-size:12px; font-weight:800; opacity:0;">0</span>
        </div>
      </div>

      <div class="card" style="padding: 15px;">
        <div class="menu-item" onclick="toggleTheme()">
            <span>üåó –°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É</span>
            <small style="opacity: 0.6;">Light / Dark</small>
        </div>
        <div class="menu-item" onclick="tg.openTelegramLink('https://t.me/LolikMoney')">
            <span style="color: var(--accent-cyan);">üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
            <span style="opacity: 0.3;">‚Üí</span>
        </div>
      </div>
    </section>

  </div>

  <!-- NAVIGATION -->
  <nav class="nav-bar">
    <div class="nav-item active" id="tab-tasks" onclick="showTab('tasks')">–ó–∞–¥–∞–Ω–∏—è</div>
    <div class="nav-item" id="tab-profile" onclick="showTab('profile')">–ü—Ä–æ—Ñ–∏–ª—å</div>
  </nav>

  <!-- FAB -->
  <div class="fab-wrap" onclick="openModal('m-create')">
    <div class="fab-btn">+</div>
  </div>

  <!-- CREATE MODAL -->
  <div id="m-create" class="overlay">
    <div class="modal">
        <h2 style="margin:0 0 5px;">–ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h2>
        <p style="color:var(--text-dim); font-size:14px; margin-bottom:15px;">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è</p>
        
        <label class="input-label">–¢–∏–ø –ø–ª–æ—â–∞–¥–∫–∏</label>
        <select id="t-type" onchange="recalc()">
            <option value="ya" data-p="120">üìç –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã (120‚ÇΩ / —à—Ç)</option>
            <option value="gm" data-p="75">üåç Google Maps (75‚ÇΩ / —à—Ç)</option>
            <option value="tg" data-p="15">‚úàÔ∏è Telegram (15‚ÇΩ / —à—Ç)</option>
        </select>

        <div id="tg-options" class="hidden" style="margin-top: 15px; background: rgba(0,234,255,0.05); padding: 12px; border-radius: 16px; border: 1px dashed var(--glass-border);">
            <div style="font-size:12px; color:var(--text-dim); line-height:1.4;">
                <b>‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:</b><br>
                –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ <span style="color:var(--accent-cyan);">@ReviewCashBot</span> –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∫–∞–Ω–∞–ª–∞, –∏–Ω–∞—á–µ –æ–Ω –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏.
            </div>
        </div>

        <label class="input-label">–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç (–ö–∞—Ä—Ç—ã/–ö–∞–Ω–∞–ª)</label>
        <input type="text" id="t-target" placeholder="https://..." style="margin-top:5px;">
        <div id="t-target-status" class="input-status"></div>

        <label class="input-label">–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ / –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
        <textarea id="t-text" rows="3" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ, –≤–∫—É—Å–Ω—ã–π –∫–æ—Ñ–µ..." style="margin-top:5px;"></textarea>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top:15px;">
            <div>
                <label class="input-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                <input type="number" id="t-qty" value="10" min="1" oninput="recalc()" style="margin-top:5px;">
            </div>
            <div>
                <label class="input-label">–í–∞–ª—é—Ç–∞ –æ–ø–ª–∞—Ç—ã</label>
                <select id="t-cur" onchange="recalc()" style="margin-top:5px;">
                    <option value="rub">RUB (‚ÇΩ)</option>
                    <option value="star">Stars (‚≠ê)</option>
                </select>
            </div>
        </div>

        <div class="total-badge">
            <div style="display:flex; flex-direction:column; gap:2px;">
                <span style="font-weight:700; opacity:0.7;">–ò—Ç–æ–≥–æ —Å –∫–æ–º–∏—Å—Å–∏–µ–π:</span>
                <span style="font-size:11px; color:var(--text-dim);">–ö–æ–º–∏—Å—Å–∏—è —Å–µ—Ä–≤–∏—Å–∞: 15%</span>
            </div>
            <span id="t-total" style="font-size:24px; font-weight:900; color:var(--accent-cyan);">0 ‚ÇΩ</span>
        </div>

        <button class="btn btn-main" style="width:100%; margin-top:25px;" onclick="createTask()">–û–ø–ª–∞—Ç–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
    </div>
  </div>

  <!-- TASK DETAILS MODAL -->
  <div id="m-task-details" class="overlay">
    <div class="modal">
        <div style="display:flex; justify-content:space-between; align-items:flex-start;">
            <div>
                <h2 id="td-title" style="margin:0;">–ó–∞–¥–∞–Ω–∏–µ</h2>
                <div id="td-reward" style="color:var(--accent-green); font-weight:800; font-size:18px; margin-top:5px;">+0 ‚ÇΩ</div>
            </div>
            <div id="td-icon" class="brand-box" style="width:60px; height:60px;"></div>
        </div>
        
        <div class="detail-block">
            <label class="input-label">–°—Å—ã–ª–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞:</label>
            <div class="copy-box" onclick="copyLink()" style="margin-top:5px;">
                <span id="td-link" style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:85%; font-size:13px; color:var(--accent-cyan);">https://...</span>
                <span>üîó</span>
            </div>
            <a id="td-link-btn" href="#" target="_blank" class="btn btn-secondary" style="width:100%; margin-top:10px; padding:10px; font-size:12px;">–ü–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ</a>
        </div>

        <div class="detail-block">
            <label class="input-label">–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å / –ù–∞–ø–∏—Å–∞—Ç—å:</label>
            <div id="td-text" style="background:var(--glass); padding:15px; border-radius:15px; margin-top:5px; font-size:14px; line-height:1.4;">
                –¢–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è...
            </div>
            <button class="btn btn-secondary" style="width:100%; margin-top:10px; padding:10px; font-size:12px;" onclick="copyText()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç</button>
        </div>

        <!-- PROOF AREA -->
        <div id="td-proof-area" style="margin-top: 25px; border-top: 1px solid var(--glass-border); padding-top: 20px;">
            
            <!-- For Reviews (Manual) -->
            <div id="proof-manual" class="hidden">
                <h3 style="margin:0 0 10px; font-size: 16px;">üì∏ –û—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏</h3>
                
                <label class="input-label">–í–∞—à –ù–∏–∫–Ω–µ–π–º / –ò–º—è</label>
                <input type="text" id="p-username" placeholder="–ü—Ä–∏–º–µ—Ä: Alex99">

                <label class="input-label">–°–∫—Ä–∏–Ω—à–æ—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</label>
                <div class="file-upload-btn" onclick="document.getElementById('p-file').click()">
                    <span id="p-filename">üì∑ –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç</span>
                </div>
                <input type="file" id="p-file" accept="image/*" style="display:none" onchange="updateFileName(this)">
            </div>

            <!-- For Auto Telegram -->
            <div id="proof-auto" class="hidden">
                <div style="background: rgba(0, 234, 255, 0.1); padding: 15px; border-radius: 15px; display:flex; gap:10px; align-items:center;">
                    <div style="font-size:24px;">ü§ñ</div>
                    <div style="font-size:13px; line-height:1.3;">
                        <b>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</b><br>
                        –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞—à—É –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∫–∞–Ω–∞–ª. –ù–µ –æ—Ç–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å 24 —á–∞—Å–∞.
                    </div>
                </div>
            </div>
        </div>

        <button id="td-action-btn" class="btn btn-main" style="width:100%; margin-top:25px;" onclick="">–î–µ–π—Å—Ç–≤–∏–µ</button>
    </div>
  </div>

  <!-- ADMIN / MODERATION MODAL -->
  <div id="m-admin" class="overlay">
    <div class="modal">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 style="margin:0;">üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ü–∏—è</h2>
            <div style="font-size:13px; opacity:0.5;">Admin Panel</div>
        </div>
        <p style="color:var(--text-dim); font-size:14px; margin-bottom:20px;">–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ—Ç—á–µ—Ç—ã –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</p>
        
        <div id="admin-list" style="display:flex; flex-direction:column; gap:15px;">
            <!-- Rendered via JS -->
        </div>
    </div>
  </div>

  <!-- TOPUP MODAL -->
  <div id="m-topup" class="overlay">
    <div class="modal">
        <h2 style="margin:0;">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
        <p style="color:var(--text-dim); font-size:14px; margin-bottom:20px;">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: 300 ‚ÇΩ</p>
        <input type="number" id="sum-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É (–æ—Ç 300)">
        
        <div class="pay-opt" onclick="processPay('pay_crypto')">
            <div class="pay-icon" style="background:#229ed9; color:#fff;">‚Çø</div>
            <div style="flex:1;"><b>–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</b><br><small style="color:var(--text-dim);">USDT / TON / BTC</small></div>
        </div>
        <div class="pay-opt" onclick="processPay('pay_stars')">
            <div class="pay-icon" style="background:#ffcc00; color:#000;">‚≠ê</div>
            <div style="flex:1;"><b>Telegram Stars</b><br><small style="color:var(--text-dim);">–ß–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å –¢–ì</small></div>
        </div>
        <div class="pay-opt" onclick="openTBankPay()">
            <div class="pay-icon" style="background:#ffdd2d; color:#000;">T</div>
            <div style="flex:1;"><b>–¢-–ë–∞–Ω–∫</b><br><small style="color:var(--text-dim);">–ö–∞—Ä—Ç–∞ –†–§ (P2P)</small></div>
        </div>
    </div>
  </div>

  <!-- TBANK MODAL -->
  <div id="m-pay-tbank" class="overlay">
    <div class="modal">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 style="margin:0;">–û–ø–ª–∞—Ç–∞ –¢-–ë–∞–Ω–∫</h2>
            <div style="opacity:0.5; font-size:20px;" onclick="closeModal()">‚úï</div>
        </div>
        
        <div style="background:var(--glass); padding:15px; border-radius:15px; margin: 15px 0; border:1px solid var(--glass-border); text-align:center;">
             <p style="margin:0 0 5px; font-size:12px; opacity:0.7;">–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ</p>
             <div id="tb-amount-display" style="font-size:28px; font-weight:800; color:var(--accent-cyan);">0 ‚ÇΩ</div>
        </div>

        <p style="font-size:13px; color:var(--text-dim); margin-bottom:8px;">1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:</p>
        <div class="copy-box" onclick="copyCode()">
            <span id="tb-code" style="font-family:monospace; font-weight:700; font-size:18px; letter-spacing:1px;">CODE</span>
            <span style="font-size:14px; opacity:0.7;">üìã</span>
        </div>

        <p style="font-size:13px; color:var(--text-dim); margin: 15px 0 8px;">2. –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –ø–æ —Å—Å—ã–ª–∫–µ, —É–∫–∞–∑–∞–≤ –∫–æ–¥ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</p>
        <a href="https://www.tinkoff.ru/rm/r_TfPtbPbddX.PiDdKULdka/kkRwB91205" target="_blank" class="btn btn-secondary" style="width:100%; text-decoration:none; margin-bottom:20px; justify-content: center;">üîó –û—Ç–∫—Ä—ã—Ç—å –¢-–ë–∞–Ω–∫</a>

        <p style="font-size:13px; color:var(--text-dim); margin-bottom:5px;">3. –í–∞—à–µ –∏–º—è (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è):</p>
        <input type="text" id="tb-sender" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω –ò." style="margin-top:0;">

        <button class="btn btn-main" style="width:100%; margin-top:20px;" onclick="confirmTBank()">–Ø –æ–ø–ª–∞—Ç–∏–ª</button>
    </div>
  </div>

  <!-- WITHDRAW MODAL -->
  <div id="m-withdraw" class="overlay">
    <div class="modal">
        <h2>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h2>
        <input type="text" id="w-details" placeholder="–ö–∞—Ä—Ç–∞ –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
        <input type="number" id="w-amount" placeholder="–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞" style="margin-top:10px;">
        <button class="btn btn-secondary" style="width:100%; margin-top:20px;" onclick="requestWithdraw()">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
